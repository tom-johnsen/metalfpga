.TH METALFPGA 1 "December 2025" "v0.8" "User Commands"
.SH NAME
metalfpga \- Verilog to Metal (MSL) compiler for GPU simulation
.SH SYNOPSIS
.B metalfpga
.I input.v
.RI [ more.v ... ]
.RI [ options ]
.SH DESCRIPTION
metalfpga parses and elaborates Verilog-2005 and can emit Metal compute kernels
and host-side scaffolding for execution on Apple GPUs.
.SH STATUS
Frontend parsing and elaboration are complete and the Verilog-2005 golden tests
pass. The backend/runtime is functional for a subset but is not a full
simulator yet. VCD dumping is supported; scheduling and runtime semantics are
still in progress.
.SH OPTIONS
.TP
.BR --emit-msl " " PATH
Write Metal shader source to PATH.
.TP
.BR --emit-host " " PATH
Write host-side runtime stub to PATH.
.TP
.BR --emit-flat " " PATH
Write flattened design to PATH.
.TP
.BR --dump-flat
Print elaborated, flattened design.
.TP
.BR --top " " MODULE
Select top-level module.
.TP
.BR --4state
Enable 4-state logic (X/Z).
.TP
.BR --auto
Auto-discover .v files under the input directory.
.TP
.BR --strict-1364
Stricter IEEE-1364 parsing and semantics checks.
.TP
.BR --sdf " " PATH
Load SDF and match timing checks.
.TP
.BR --version
Print version and exit.
.TP
.BR --run
Execute on GPU (runtime support is partial).
.TP
.BR --vcd-dir " " PATH
Directory for VCD output.
.TP
.BR --vcd-steps " " N
Scheduler step interval between VCD samples.
.TP
.BR --count " " N
Number of kernel instances (default 1).
.TP
.BR --max-steps " " N
Max scheduler steps per dispatch.
.TP
.BR --max-proc-steps " " N
Max scheduler steps per process.
.TP
.BR --service-capacity " " N
Service record buffer capacity.
.TP
.BR --dispatch-timeout-ms " " N
GPU dispatch timeout in ms.
.TP
.BR --run-verbose
Verbose runtime logging.
.TP
.BR --source-bindings
Use source-level shader bindings.
.TP
.BI +ARG[=VALUE]
Plusargs for $test$plusargs and $value$plusargs.
.SH ENVIRONMENT
.TP
.BR METALFPGA_STRING_PAD
String literal padding: zero or space (default zero).
.TP
.BR METALFPGA_SPECIFY_DELAY_SELECT
Specify delay selection: fast or slow (default fast).
.TP
.BR METALFPGA_NEGATIVE_SETUP_MODE
Negative setup handling: allow, clamp, or error (default allow).
.TP
.BR METALFPGA_SDF_VERBOSE
Enable verbose SDF match/mismatch logging.
.SH EXAMPLES
.TP
.B metalfpga design.v
Parse and elaborate.
.TP
.B metalfpga design.v --emit-msl out.metal
Emit Metal shader source.
.TP
.B metalfpga tb.v --run --vcd-dir waves
Run with VCD output.
.SH SEE ALSO
README.md, docs/VERILOG_TEST_OVERVIEW.md, docs/LOOSE_ENDS.md
.SH EXIT STATUS
.TP
.B 0
Success
.TP
.B 1
Parse/elaboration error
.TP
.B 2
Invalid command-line arguments
